<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff">
  <title>Antapura Vacation Club</title>
  <link rel="stylesheet" href="/css/mdb.min.css">
  <link rel="stylesheet" href="/css/uicons-rounded.css">
  <link rel="stylesheet" href="/css/swiper-bundle.min.css">
  <link rel="stylesheet" href="/css/ui.css">
</head>
<body class="bg-body-light">
  <div class="splash-screen">
    Antapura
  </div>

  <div class="app-container">
    <div class="app-home-header">
      <div class="top-bar">
        <div class="top-bar-container">
          <div class="user-info d-flex gap-2">
            <div class="avatar">
              <img src="./images/memoji/Memoji-04.png" alt="User Avatar">
            </div>
            <div class="content lh-sm">
              <div class="text-xs">Hello</div>
              <div class="text-sm fw-bold">Debi Rahmadi</div>
            </div>
          </div>
          
          <div class="d-flex gap-1">
            <a href="search.html" class="btn-icon"><i class="fi fi-rr-search"></i></a>
            <a href="#" class="d-none btn-icon"><i class="fi fi-rr-bell"></i></a>
          </div>
        </div>
      </div>

      <div class="app-home-balance" onclick="javascript:location.href='point_details.html'">
        <div id="founder-point">
          <div class="text-xs mb-1">Founder Point Balance</div>
          <h2 class="mb-2">328.800</h2>
          <small class="text-xs">Exp: Dec 2025</small>
        </div>
        <div id="club-point" class="text-end">
          <div class="text-xs mb-1">Club Point Balance</div>
          <h2 class="mb-2">298.600</h2>
          <a href="point_details.html" class="d-inline-flex align-items-center gap-1 text-xs">See details <i class="fi fi-rr-angle-circle-right"></i></a>
        </div>
      </div>

      <div class="app-home-balance-action">
        <button class="btn bg-primary-new" data-mdb-offcanvas-init data-mdb-target="#off_topup" aria-controls="off_topup">Top Up</button>
        <button class="btn bg-success-new" data-mdb-offcanvas-init data-mdb-target="#off_transfer" aria-controls="off_transfer">Transfer</button>
        <button class="btn bg-warning-new" data-mdb-offcanvas-init data-mdb-target="#off_ask" aria-controls="off_ask">Ask</button>
        <button class="btn bg-purple" data-mdb-offcanvas-init data-mdb-target="#off_offer" aria-controls="off_offer">Offer</button>
      </div>
    </div>

    <div class="app-home-marketplace">
      <div class="bg-white p-3 rounded-normal shadow-xs">
        <nav class="mb-3">
          <div class="nav nav-underline nav-justified rounded-pill" id="nav-tab" role="tablist">
            <button class="nav-link active" id="nav-ask-tab" data-mdb-tab-init data-mdb-target="#ask-tab" type="button" role="tab" aria-controls="ask-tab" aria-selected="true">Ask Point</button>
            <button class="nav-link" id="nav-offer-tab" data-mdb-tab-init data-mdb-target="#offer-tab" type="button" role="tab" aria-controls="offer-tab" aria-selected="false">Offer Point</button>
          </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
          <!-- Market ask -->
          <div class="tab-pane fade show active" id="ask-tab" role="tabpanel" aria-labelledby="nav-ask-tab" tabindex="0">
            <table class="table table-sm table-borderless">
              <thead>
                <tr class="text-xs text-uppercase">
                  <th>Point (Pts)</th>
                  <th class="text-end">Price (IDR)</th>
                  <th class="text-end">Act</th>
                </tr>
              </thead>
              <tbody class="text-sm">
                <tr class="border-top">
                  <td><span class="point-icon">C</span> 3.000</td>
                  <td class="text-end">2.500.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#offerPointModal">Offer</a></td>
                </tr>
                <tr class="border-top">
                  <td><span class="point-icon">F</span> 3.800</td>
                  <td class="text-end">3.850.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#offerPointModal">Offer</a></td>
                </tr>
                <tr class="border-top">
                  <td><span class="point-icon">F</span> 6.000</td>
                  <td class="text-end">6.800.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#offerPointModal">Offer</a></td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Market offer -->
          <div class="tab-pane fade" id="offer-tab" role="tabpanel" aria-labelledby="nav-offer-tab" tabindex="0">
            <table class="table table-sm table-borderless">
              <thead>
                <tr class="text-xs text-uppercase">
                  <th>Point (Pts)</th>
                  <th class="text-end">Price (IDR)</th>
                  <th class="text-end">Act</th>
                </tr>
              </thead>
              <tbody class="text-sm">
                <tr class="border-top">
                  <td><span class="point-icon">F</span> 5.000</td>
                  <td class="text-end">5.800.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#askPointModal">Ask</a></td>
                </tr>
                <tr class="border-top">
                  <td><span class="point-icon">F</span> 6.000</td>
                  <td class="text-end">7.000.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#askPointModal">Ask</a></td>
                </tr>
                <tr class="border-top">
                  <td><span class="point-icon">F</span> 6.000</td>
                  <td class="text-end">6.200.000</td>
                  <td class="text-end text-primary text-uppercase fw-bold"><a href="#" data-mdb-modal-init data-mdb-target="#askPointModal">Ask</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <div class="d-grid">
          <button class="btn btn-flex btn-candy-black" onclick="javascript:location.href='market.html'">
            <i class="fi fi-rr-shop text-lg"></i> Visit market place
          </button>
        </div>
      </div>
    </div>

    <div class="app-home-banner">
      <div class="swiper-container banner-promo">
        <div class="swiper-wrapper">
          <a href="#" class="swiper-slide">
            <img src="./images/sample/banner_01.jpg" class="img-fluid rounded-normal">
          </a>
          <a href="#" class="swiper-slide">
            <img src="./images/sample/banner_02.jpg" class="img-fluid rounded-normal">
          </a>
        </div>
      </div>
    </div>

    <div class="app-home-content">
      <div class="content-header">
        <h5 class="heading">Popular Destination</h5>
      </div>

      <div class="swiper-container banner-featured">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <img src="https://atourin.obs.ap-southeast-3.myhuaweicloud.com/images/destination/batam/jembatan-barelang-profile1694589910.jpeg?x-image-process=image/resize,p_100,limit_1/imageslim">
            <div class="content">Batam - Indonesia</div>
          </div>
          <div class="swiper-slide">
            <img src="https://images.unsplash.com/photo-1574227492706-f65b24c3688a?q=80&w=1632&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
            <div class="content">Singapore</div>
          </div>
          <div class="swiper-slide">
            <img src="https://images.unsplash.com/photo-1577931683033-1059552104e0?q=80&w=1473&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
            <div class="content">Malaysia</div>
          </div>
          <div class="swiper-slide">
            <img src="https://images.unsplash.com/photo-1506665531195-3566af2b4dfa?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
            <div class="content">Thailand</div>
          </div>
        </div>
      </div>
    </div>

    <div class="app-home-content">
      <div class="content-header">
        <h5 class="heading">Featured Listings</h5>
        <a href="#" class="text-primary">View All</a>
      </div>

      <div class="card-col-lists">
        <a href="places.html" class="list-items">
          <button class="btn btn-save"><i class="fi fi-rr-heart"></i></button>
          <img src="https://images.unsplash.com/photo-1610641818989-c2051b5e2cfd?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
          <div class="content d-flex align-items-center">
            <div class="flex-fill pe-4">
              <h5 class="fw-bold">Antapura Resort</h5>
              <div class="d-flex align-items-center gap-1 text-xs text-muted"><i class="fi fi-rr-marker"></i> Batam - Indonesia</div>
            </div>
            <div class="w-25 text-end ps-4">
              <h4 class="mb-0">8.000</h4>
              <div class="text-xs text-muted">Points</div>
            </div>
          </div>
        </a>

        <a href="places.html" class="list-items">
          <button class="btn btn-save"><i class="fi fi-rr-heart"></i></button>
          <img src="https://specials.priceless.com/mastercard/images/92c0871c-a792-47bf-8ebf-fc0fce6aa1ae.jpg">
          <div class="content d-flex align-items-center">
            <div class="flex-fill pe-4">
              <h5 class="fw-bold">Planet Holiday Hotel & Residence</h5>
              <div class="d-flex align-items-center gap-1 text-xs text-muted"><i class="fi fi-rr-marker"></i> Batam - Indonesia</div>
            </div>
            <div class="w-25 text-end ps-4">
              <h4 class="mb-0">7.600</h4>
              <div class="text-xs text-muted">Points</div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <div class="bottom-navbar">
    <div class="container grid-5">
      <a href="index.html" class="navbar-menu active"><h3 class="mb-1"><i class="fi fi-rr-house-blank"></i></h3>Home</a>
      <a href="transaction_history.html" class="navbar-menu"><h3 class="mb-1"><i class="fi fi-rr-time-past"></i></h3>History</a>
      <a href="market.html" class="navbar-menu"><h3 class="mb-1"><i class="fi fi-rr-shop"></i></h3>Market</a>
      <a href="contact.html" class="navbar-menu"><h3 class="mb-1"><i class="fi fi-rr-book-user"></i></h3>Contact</a>
      <a href="account.html" class="navbar-menu"><h3 class="mb-1"><i class="fi fi-rr-circle-user"></i></h3>Account</a>
    </div>
  </div>

  <!-- Offcanvas Topup -->
  <div class="offcanvas offcanvas-bottom offcanvas-full" tabindex="-1" id="off_topup" aria-labelledby="offcanvasTopup">
    <div class="offcanvas-header">
      <h4 class="offcanvas-title fw-bold" id="offcanvasBottomLabel">Top Up</h4>
      <button type="button" class="btn-close" data-mdb-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body small">
      <form action="" class="flex-high">
        <div id="topup-amount" class="input-amount mb-3">
          <label for="select-type" class="text-xs mb-2">Enter Top Up Amount</label>
          <input type="text" class="form-control text-center bg-light" inputmode="numeric">

          <div class="preset-amount grid-3 gap-2 mt-2">
            <button type="button" class="btn btn-normal border">5.000</button>
            <button type="button" class="btn btn-normal border">10.000</button>
            <button type="button" class="btn btn-normal border">25.000</button>
            <button type="button" class="btn btn-normal border">75.000</button>
            <button type="button" class="btn btn-normal border">100.000</button>
            <button type="button" class="btn btn-normal border">Custom</button>
          </div>
        </div>

        <div class="offcanvas-footer d-grid mt-auto">
          <button type="button" class="btn btn-dark" onclick="javascript:location.href='confirm_action.html'">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Offcanvas Transfer -->
  <div class="offcanvas offcanvas-bottom offcanvas-full" tabindex="-1" id="off_transfer" aria-labelledby="offcanvasTransfer">
    <div class="offcanvas-header">
      <h4 class="offcanvas-title fw-bold" id="offcanvasBottomLabel">Transfer Point</h4>
      <button type="button" class="btn-close" data-mdb-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body small">
      <form action="" class="flex-high">
        <div id="transfer-amount" class="input-amount mb-3">
          <label for="select-source" class="text-xs mb-2">Transfer Amount</label>
          <input type="text" class="form-control text-center bg-light" inputmode="numeric">
        </div>

        <div id="transfer-target" class="mb-3">
          <label for="select-type" class="text-xs mb-2">Transfer To</label>
          <input type="text" list="user-tos" name="" id="" class="form-control text-sm" autocomplete="off" onkeyup="loadMemberDataInfo(this,false);">
          <datalist id="user-to">
            <option value="John Doe">+628123456789</option>
            <option value="Jane Doe">+628321572015</option>
          </datalist>
        </div>

        <div id="transfer-source" class="mb-3">
          <label for="fth-period" class="text-xs mb-2">Source of Point</label>
          <div class="dropdown d-grid">
            <button class="btn btn-dropdown btn-toggle justify-content-start" type="button" data-mdb-dropdown-init aria-expanded="false">Select source</button>
            <ul class="dropdown-menu w-100 border shadow-none">
              <li>
                <label>
                  <input type="radio" name="transfer-source" id="" value="founder" class="form-check-input d-none">
                  <span>Founder Point</span>
                  <span class="ms-auto">328.800</span>
                </label>
              </li>
              <li>
                <label>
                  <input type="radio" name="transfer-source" id="" value="club" class="form-check-input d-none"> 
                  <span>Club Point</span>
                  <span class="ms-auto">298.600</span>
                </label>
              </li>
            </ul>
          </div>
        </div>

        <div id="transfer-target" class="mb-3">
          <label for="select-type" class="text-xs mb-2">Message (Optional)</label>
          <input type="text" name="" id="" class="form-control text-sm">
        </div>

        <div class="offcanvas-footer d-grid mt-auto">
          <button type="button" class="btn btn-dark">Transfer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Offcanvas Ask -->
  <div class="offcanvas offcanvas-bottom offcanvas-full" tabindex="-1" id="off_ask" aria-labelledby="offcanvasBuy">
    <div class="offcanvas-header">
      <h4 class="offcanvas-title fw-bold" id="offcanvasBottomLabel">Ask Point</h4>
      <button type="button" class="btn-close" data-mdb-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body small">
      <form action="" class="flex-high">
        <div id="buy-amount" class="input-amount mb-2">
          <label for="select-type" class="text-xs mb-2">Amount of point to ask</label>
          <input type="text" class="form-control text-center bg-light" inputmode="numeric">
        </div>

        <div id="buy-price" class="mb-3">
          <label for="select-source" class="text-xs mb-2">Price to pay</label>
          <div class="input-currency">
            <input type="text" name="" id="" class="form-control text-sm" inputmode="numeric">
            <span class="currency-name">IDR</span>
          </div>
        </div>

        <div class="offcanvas-footer d-grid mt-auto">
          <button type="button" class="btn btn-dark">Ask Point</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Offcanvas Offer -->
  <div class="offcanvas offcanvas-bottom offcanvas-full" tabindex="-1" id="off_offer" aria-labelledby="offcanvasSell">
    <div class="offcanvas-header">
      <h4 class="offcanvas-title fw-bold" id="offcanvasBottomLabel">Offer Point</h4>
      <button type="button" class="btn-close" data-mdb-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body small">
      <form action="" class="flex-high">
        <div id="sell-amount" class="input-amount mb-3">
          <label for="select-type" class="text-xs mb-2">Amount of point to offer</label>
          <input type="text" class="form-control text-center bg-light" inputmode="numeric">
        </div>

        <div id="sell-price" class="mb-3">
          <label for="select-source" class="text-xs mb-2">Selling price</label>
          <div class="input-currency">
            <input type="text" name="" id="" class="form-control text-sm" inputmode="numeric">
            <span class="currency-name">IDR</span>
          </div>
        </div>

        <div id="sell-source" class="mb-3">
          <label class="text-xs mb-2">Source of point</label>
          <div class="dropdown d-grid">
            <button class="btn btn-dropdown btn-toggle justify-content-start" type="button" data-mdb-dropdown-init aria-expanded="false">Select source</button>
            <ul class="dropdown-menu w-100 border shadow-none">
              <li>
                <label>
                  <input type="radio" name="transfer-source" id="" value="today" class="form-check-input d-none">
                  <div>Founder Point</div>
                  <span class="ms-auto">328.800</span>
                </label>
              </li>
              <li>
                <label>
                  <input type="radio" name="transfer-source" id="" value="week" class="form-check-input d-none">
                  <div>Club Point</div>
                  <span class="ms-auto">298.600</span>
                </label>
              </li>
            </ul>
          </div>
        </div>

        <div class="offcanvas-footer d-grid mt-auto">
          <button type="button" class="btn btn-dark">Offer Point</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Ask -->
  <div class="modal fade" id="askPointModal" tabindex="-1" aria-labelledby="askPointModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form class="d-flex flex-column flex-fill">
          <div class="modal-header">
            <h4 class="modal-title fw-bold" id="exampleModalLabel">Ask Point</h4>
            <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body p-4 text-sm">
            Are you sure want to ask <b>3.000</b> points for <b>IDR 2.500.000</b>?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-step btn-normal btn-primary">Yes</button>
            <button type="button" class="btn btn-step btn-normal btn-danger" data-mdb-dismiss="modal">No</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal Offer -->
  <div class="modal fade" id="offerPointModal" tabindex="-1" aria-labelledby="offerPointModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form class="d-flex flex-column flex-fill">
          <div class="modal-header">
            <h4 class="modal-title fw-bold" id="exampleModalLabel">Offer Point</h4>
            <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body p-4 text-sm">
            Are you sure want to offer <b>5.000</b> points for <b>IDR 5.800.000</b>?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-step btn-normal btn-primary">Yes</button>
            <button type="button" class="btn btn-step btn-normal btn-danger" data-mdb-dismiss="modal">No</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="/js/jquery.min.js"></script>
  <script src="/js/mdb.umd.min.js"></script>
  <script src="/js/datatables.min.js"></script>
  <script src="/js/swiper-bundle.min.js"></script>
  <script src="/js/swiper.js"></script>
  <script src="/js/main.js"></script>
  <script>
    function loadMemberDataInfo(e,b) {
      const datalist = e.nextElementSibling;
      //const memberprofile = document.getElementById('user-profile');
      //const memberData = memberprofile.querySelectorAll('.list-group-item');
      //const memberPoint = document.getElementById('user-point').querySelectorAll('tbody tr');

      let data = [];
      fetch('/data_dummy/user.json')
      .then(response => response.json())
      .then(json => {
        data = json;
        memberLists(e.value);
      })
      .catch(error => console.error('Error fetching data:', error));

      function memberLists(f) {
        const filteredData = data.filter(user => {
          if(f !== ""){
            return user.fullname.toLowerCase().startsWith(f);
            return user.whatsapp.toLowerCase().includes(f);
          }
        });

        filteredData.forEach(user => {
          while (datalist.firstChild) {
            datalist.removeChild(datalist.firstChild);
          }

          const option = document.createElement('option');
          option.value = user.fullname;
          option.textContent = user.whatsapp;
          datalist.appendChild(option);

          function formatDate(dateString) {
            if(dateString === ""){
              return "-";
            }else{
              const options = { day: '2-digit', month: 'short', year: 'numeric' };
              return new Date(dateString).toLocaleDateString('en-GB', options);
            }
          }

          option.addEventListener('click', () => {
            e.value = option.value;
            e.classList.remove('active');
            if(b) { displayMemberData(user); }
          });

          function displayMemberData(user) {
            memberData[0].children[1].textContent = user.member_type;
            memberData[1].children[1].textContent = user.fullname;
            memberData[2].children[1].textContent = user.whatsapp;
            memberData[3].children[1].textContent = user.email;
            memberData[4].children[1].textContent = `${user.place_of_birth}, ${formatDate(user.date_of_birth)}`;
            memberData[5].children[1].textContent = user.gender;
            memberData[6].children[1].textContent = user.address;
            memberData[7].children[1].textContent = user.notes;
            memberData[8].children[1].textContent = formatDate(user.join_date);

            memberPoint[0].children[1].textContent = user.founder_point.amount;
            memberPoint[0].children[2].textContent = formatDate(user.founder_point.validity);
            memberPoint[0].children[3].textContent = user.founder_point.hold;
            memberPoint[0].children[4].textContent = user.founder_point.total;

            memberPoint[1].children[1].textContent = user.club_point.amount;
            memberPoint[1].children[2].textContent = formatDate(user.club_point.validity);
            memberPoint[1].children[3].textContent = user.club_point.hold;
            memberPoint[1].children[4].textContent = user.club_point.total;
          }
        });

        e.classList.toggle('active', e.value.length > 0 && datalist.children.length > 0);
      }

      document.addEventListener('click', function(event) {
        const isClickedInsideDatalist = datalist.contains(event.target);
        const isClickedOnDatalistInput = (event.target === e);

        if (!isClickedInsideDatalist && !isClickedOnDatalistInput) {
          e.classList.remove('active');
        }
      });
    }
  </script>
</body>
</html>